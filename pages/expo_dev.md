# Expo.dev

1. [Установка](#установка)
2. [Запуск](#запуск)
3. [Програмироваем](#програмироваем)

`React Native` настолько `Native`, что в состав проекта __не входит__ инструментов для отображения и отладки вашего `APP` в виде `WEB` в броузере. И это наверное правильно. Но, вся эта морока с эмуляторами, встроенными отладчиками... БРРР... Не хочу. Не хочу настолько, что даже мелькнула мысль накидать своих компонент ведущих себя как в `React Native`. Пришлось бить себя по рукам, ведь, кто то уже должен был сделать это до меня =)... Немного гугла и сразу выделаем проекта под названием `Expo`.

Сайт: [https://expo.dev/](https://expo.dev/)

`Expo` - это надстройка над `React Native` которая позволяет запускать приложения не только на подключенном устройстве но и удаленно. Также, имеется возможность запустить приложение в броузере. 

В результате мы можем отлаживать приложение не загружая процессор эмуляцией, а также, у нас появляется возможность отлаживать `iOS` приложения не имея соответствующей техники. Правда, для этого скорее всего нужна регистрации, и в дальнейшем, нам намекнут на тарифы ($99/mo)... но так далеко заглядывать пока не будем =)

# Установка

Глобально ставим cli версию.

```
npm i -g expo-cli
```

Создаем проект.

```
npx create-expo-app my-app
```

> Что приятно, `Expo` проект весит `200 Мб.`, проект на `React Native` весил при создании `300 Мб.` после разросся до `1.17 Гб.`, хотя, по сути, я там сделал ничего, только написал статейку по установке и запустил проект на эмуляторе =) 
>
> Чтош, поглядим как поведет `Expo` проект в этом плане =)

# Запуск

```
expo start
```

Запустит `Metro`. В меню выбираем нужное.

- `Press a | open Android` - запустить на Android.
- `Press w | open Web` - запустить в броузере.
- `Press r | reload app` - перезагрузить приложение.
- `Press m | toggle menu` - включить меню отладки (не работает в броузере). 
- `Press ? │ show all commands` - показать полный список команд.

Также возможно запустить приложение указав нужное.

```
expo start --android
expo start --web
npm run android
npm run web
```

На момент написания статьи, `node.js` выпустила версию `18`. `Expo` еще не успела догнать современные стандарты и ориентированно на `17` версию `node.js`, по этому при запуске `web` версии выдает ошибку. 

Лечится это путем установки более старой версии либо установкой переменной окружения `NODE_OPTIONS`.

```
set NODE_OPTIONS=--openssl-legacy-provider
```

Что бы не устанавливать переменную вручную каждую сессию и не указывать ее глобально, прописываем ее в `package.json` проекта.

```
{
    ...
    "scripts": {
        "start": "set NODE_OPTIONS=--openssl-legacy-provider && expo start",
        ...
        "web": "set NODE_OPTIONS=--openssl-legacy-provider && expo start --web",
        ...
    }
    ...
}
```

Android эмулятор запускается с пробуксовками, иногда зависает и не может подключится, хотя, эмулятор запущен и работает. Иногда эмулятор отваливается и не хочет обновляться. Мне помогал перезапуск `Metro` без выключения эмулятора.

Как я понял, при запуске `Metro` пытается подключится к первому работающему эмулятору, либо пытается запустить первый возможный и долго ждет а возможно зависает на веки, я так и не дождался =(

Делаю вывод, что верным будет запустить эмулятор до запуска приложения.

Получаем список эмуляторов установленных на вашей системе. 

```
emulator -list-avds
```

Запускаем нужный нам эмулятор.

```
emulator -avd Nexus_5_API_31
```

Затем все делаем как я писал выше.

```
npm start
```

Жмём кнопку `Press a | Android`

# Програмироваем

Итак, корень проекта находится в `app.js`. Код пишем на `React`, надеюсь вы его знаете, так как расписывать, что такой `React` и как на нем что то делать выходит за рамки этого текста.

Главным отличием `React Native` от простого `React` является то, что нам придется работать не с привычным `HTML`, а с нативными элементам которые ведут себя иначе, чем привычные нам элементы вроде `<div>`. И нет, я сейчас не про `jsx`, а про то, что нет привычного нам <div> или `<p>`, а в место них есть `<View>`, `<Text>` и т.п. И это не просто переименованные теги, у них иное поведения и правила работы с ними. 

Например, есть стили, но нет привычного веб разработчикам `css`. Стили надо указывать для каждого элемента и описывать в виде отдельного объекта, хотя можно и указывать инлайн внутри двойных скобок `style={{color: 'red}}`. Что бы выделить или покрасить часть текста внутри строки надо разбить его на части в виде элементов `<Text>`, при этом, они должны находится внутри тега `<Text>`, иначе каждые элемент выведется как отдельная строка. Для этого даже есть специальное название "Вложенные строки (Nested)" . При этом, вложенные строки наследуют стили <Text> в которые он вложен, но не других элементов (например `<View>`).

Документация по компонентам React Native: [https://reactnative.dev/docs/components-and-apis](https://reactnative.dev/docs/components-and-apis)

API React Native: [https://reactnative.dev/docs/accessibilityinfo](https://reactnative.dev/docs/accessibilityinfo)

Документация по компонентам React Native а также по компонентам Expo: [https://docs.expo.dev/versions/latest/](https://docs.expo.dev/versions/latest/)